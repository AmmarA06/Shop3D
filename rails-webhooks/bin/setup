#!/usr/bin/env bash
set -e

echo "=== Rails Webhooks Service Setup ==="
echo ""

# Check if bundler is installed
if ! command -v bundle &> /dev/null; then
    echo "âŒ Bundler not found. Installing..."
    gem install bundler
fi

# Install dependencies
echo "ğŸ“¦ Installing dependencies..."
bundle install

# Create required directories
echo "ğŸ“ Creating directories..."
mkdir -p log tmp/pids

# Check for .env file
if [ ! -f .env ]; then
    echo "âš ï¸  No .env file found. Creating from example..."
    cp .env.example .env
    echo "ğŸ“ Please edit .env with your configuration"
fi

echo ""
echo "âœ… Setup complete!"
echo ""
echo "To start the server:"
echo "  bundle exec rails server -p 4000"
echo ""

